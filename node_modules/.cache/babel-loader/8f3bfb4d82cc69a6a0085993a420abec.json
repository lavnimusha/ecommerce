{"ast":null,"code":"var _jsxFileName = \"/Users/lavanyagurajada/enguyen/ecommerce/src/Pages/Cart.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { database } from \"../firebase-config\";\nimport { ref, onValue } from \"firebase/database\";\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport CartCard from '../Components/CartCard';\nimport Divider from '@mui/material/Divider';\nimport Paper from '@mui/material/Paper';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cart() {\n  _s();\n\n  const [cart, setCart] = useState({});\n  const [inventory, setInventory] = useState({});\n  const [cartCount, setCartCount] = useState(0);\n  useEffect(() => {\n    // Update the document title using the browser API\n    const starCountRef = ref(database, 'shopping/');\n    onValue(starCountRef, snapshot => {\n      const data = snapshot.val();\n      setCart(data);\n      console.log(Object.keys(cart).length);\n    });\n  }, []);\n  useEffect(() => {\n    let obj = {};\n    Object.entries(cart).forEach(func);\n\n    function func(value) {\n      setCartCount(cartCount + 1);\n      console.log(cartCount);\n      if (!obj.hasOwnProperty(value[1].title)) obj[value[1].title] = {\n        picture: value[1].picture,\n        entries: [value[0]],\n        price: value[1].price,\n        count: 1\n      };else {\n        let arr = [...obj[value[1].title].entries];\n        arr.push(value[0]);\n        arr = [...removeDuplicates(arr)];\n        obj[value[1].title].entries = [...arr];\n        obj[value[1].title].count += 1;\n      }\n    }\n\n    function removeDuplicates(entryArr) {\n      for (let i = 0; i < entryArr.length; i++) {\n        if (entryArr.lastIndexOf(entryArr[i]) != i) {\n          entryArr.splice(entryArr.lastIndexOf(entryArr[i]), 1);\n        }\n      }\n\n      return entryArr;\n    }\n\n    setInventory(obj);\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      flexGrow: 1\n    },\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: Object.entries(inventory).map((data, index) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          width: \"90%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(CartCard, {\n          entries: data[1].entries,\n          title: data[0],\n          picture: data[1].picture,\n          price: data[1].price,\n          count: data[1].count\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        position: 'fixed',\n        bottom: 0,\n        left: 0,\n        right: 0\n      },\n      elevation: 3,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          p: 2,\n          ml: 8,\n          mr: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"Total: 15\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            children: \"Proceed to Pay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Cart, \"dlTEJUxgGPWryiIZ2U16RhBGYQU=\");\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","useState","database","ref","onValue","Box","Grid","CartCard","Divider","Paper","Typography","Button","Cart","cart","setCart","inventory","setInventory","cartCount","setCartCount","starCountRef","snapshot","data","val","console","log","Object","keys","length","obj","entries","forEach","func","value","hasOwnProperty","title","picture","price","count","arr","push","removeDuplicates","entryArr","i","lastIndexOf","splice","display","flexGrow","map","index","width","position","bottom","left","right","flexDirection","justifyContent","p","ml","mr"],"sources":["/Users/lavanyagurajada/enguyen/ecommerce/src/Pages/Cart.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {database} from \"../firebase-config\"\nimport { getDatabase, ref, onValue} from \"firebase/database\";\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport CartCard from '../Components/CartCard'\nimport Divider from '@mui/material/Divider';\nimport Paper from '@mui/material/Paper';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\n\ninterface Inventory {\n  picture: string,\n  entries: string[],\n  price: string,\n  count: number\n}\ninterface InventoryEntry{\n  [title:string]: Inventory\n}\ninterface Product  {\n  picture: string,\n  title: string,\n  price: string\n}\ninterface ProductEntry {\n  [key:string]: Product\n}\n\n\n\nfunction Cart() {\n  const [cart, setCart] =  useState<ProductEntry>({})\n  const [inventory, setInventory] =  useState<InventoryEntry>({})\n  const [cartCount, setCartCount] = useState<number>(0)\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    const starCountRef = ref(database, 'shopping/');\n    onValue(starCountRef, (snapshot) => {\n      const data = snapshot.val();\n      setCart(data)\n      console.log(Object.keys(cart).length)\n    });\n    \n  },[])\n\n  useEffect(() => {\n      \n      let obj: InventoryEntry = {}\n      Object.entries(cart).forEach(func)\n\n      function func(value: [string, Product]){\n        \n        setCartCount(cartCount+1)\n        console.log(cartCount)\n         if(!obj.hasOwnProperty(value[1].title))\n          obj[value[1].title] = {\n            picture: value[1].picture,\n            entries: [value[0]],\n            price: value[1].price,\n            count: 1\n          }\n          else{\n            let arr :string[] = [...obj[value[1].title].entries] \n            arr.push(value[0])\n            arr = [...removeDuplicates(arr)]\n            obj[value[1].title].entries = [...arr];\n            (obj[value[1].title]).count += 1; \n            }\n          } \n          function removeDuplicates(entryArr :string[]){\n              for( let i = 0; i < entryArr.length; i++){\n                  if(entryArr.lastIndexOf(entryArr[i]) != i ){\n                        entryArr.splice(entryArr.lastIndexOf(entryArr[i]), 1)      \n                  }\n              }\n              return entryArr\n          }\n          setInventory(obj)\n     \n  },[cart]);\n\n  return (\n    <Box sx={{ display: 'flex', flexGrow: 1 }}>\n      \n       <Grid container >\n        {Object.entries(inventory).map((data, index) => (\n          <Grid item sx={{width: \"90%\"}} key={index}>\n              <CartCard entries={data[1].entries} title={data[0]} picture={data[1].picture}  price={data[1].price} count={data[1].count}/>  \n            <Divider />\n          </Grid>\n        ))}\n      </Grid> \n      <Paper sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }} elevation={3}>\n        <Box sx={{display: \"flex\", flexDirection: \"row\", justifyContent:\"space-between\", p: 2, ml: 8, mr: 8}}>\n            <Box>\n              <Typography variant=\"h5\">Total: 15</Typography>\n            </Box>\n            <Box>\n              <Button variant=\"contained\" >Proceed to Pay</Button>\n            </Box>\n        </Box>\n        \n      </Paper>\n    </Box>\n  )\n}\n\nexport default Cart"],"mappings":"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"},"metadata":{},"sourceType":"module"}